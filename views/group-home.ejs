<% include header.html %>

<header class="bar-title">
  <a class="button-prev" href="/" data-transition="slide-out">
      Groups
    </a>
  <h1 class="title"><%= pageTitle %></h1>
  <a class="button" href="/<%= name_linkified %>/add" data-transition="slide-in">
      Add
    </a>
</header>

<nav class="bar-standard bar-header-secondary">
  <ul class="segmented-controller">
    <li class="active">
      <a href="#summary">Summary</a>
    </li>
    <li>
      <a id="payment-button" href="#payments">List of Payments</a>
    </li>
  </ul>
</nav>

<div class="content">
  <ul class="list">
    <!-- summary -->
    <% summary.forEach(function(personObj){ %>
    <li id="summary" class="segmented-controller-item active list-divider"><%= personObj.person %></li>
    <a href="/<%= name_linkified %>/user/<%= personObj.person.toLowerCase() %>" data-transition="slide-in">
      <li id="summary" class="segmented-controller-item active amounts">
        <span class="summary person"><img src="/images/<%= personObj.person.toLowerCase() + '.png' %>"></span>
    		<span class="summary paid"><span class="summary amount"><%= personObj.paid %></span><br></span>
    		<span class="summary should-pay"><span class="summary amount"><%= personObj.share %></span><br></span>
    		<span class="summary net">
    		  <% if (parseFloat(personObj.balance)<0) { neg_balance = parseFloat(-personObj.balance).toFixed(2)+''; %>
    		  <span class="summary amount net-amount minus"><%= neg_balance %>
    		  <% } else { %>
    		  <span class="summary amount net-amount plus"><%= personObj.balance %>
    		  <% } %>
    		  </span><br>
    		</span>
    		<span class="chevron"></span>
      </li>
    </a>
    <% }) %>
    <!-- payments -->
    <% payments.forEach(function(paymentObj){ %>
    <li id="payments" class="segmented-controller-item list-divider"><%= formatTime(paymentObj.date) %></li>
    <% paymentObj.list.forEach(function(payment){ %>
    <a href="/<%= name_linkified %>/payment/<%= payment.id %>" data-transition="slide-in">
    <li id="payments" class="segmented-controller-item">
      <div class="payment item"><%= payment.description %></div>
      <div class="payment person"><%= payment.payer %></div>
      <span class="payment price"><%= payment.amount %></span>
      <span class="chevron"></span>
    </li>
    </a>
    <% }) %>
    <% }) %>
  </ul>
</div>

<script type="text/javascript">
	$(document).load(function(){
		$('.slider').hide();
	});
	$('#summary').live("click",function(){
		$('.slider').hide();
	});
	$('.need-to-be-settled').live("click",function(){
		$('.slider').show();
	});
	$('#payment-button').live("click",function(){
		$('.slider').hide();
	});
</script>

<% include footer.html %>